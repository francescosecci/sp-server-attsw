language: java
sudo: false
install: true
addons:
  sonarcloud:
    organization: "francescosecci-github"
    token:
      secure: "qgtQlpfR8XPfcuxFsajoMMBHlC5tzn5+S9jHEblP12vpv42zXL63FOaf8LapUhwBwe4nNxiWGoaMG33mKKV+2T86vUMz9CWjbrhTyKTA0o9pqHuVmurVjJA84Ryy/OE5kTzCig++UeH0bElSWAnorgA75OIZLszYG5aLOGiBD48no3UGviYgP5DbIUI4fdoi0c9i6f04YHI0ESQgJ97g+ZdhhdrIa0RFh6Y2tisx/mWbVGWxtuZmif9O2gcSuXYwuTqUF0Nr9oqk4ay3vzQsFmetq7n5/T3Pwym9ELMYl1x1Edlymyf5K8kxpwwDb/0XfuBHfOd5ilrAUENoiLrAiyDo0j6HUTIdiOGHgbePXz5xfg0kCER725QSN8aq98ZjX3z/Y2V/Wb3AOvHv2NjzY1kI/ZZFCbB3RuqKH7TxM3HvUqA6tcpR18AJvkXp1/GIV7EyhICyaAcgwspBR2olYY/r+vN/4AzN0WsOD55xojyfMS5p1ezL6L86BarInLh7KLcG9R3SuiGdIcwpfOBbJ/wxiaABoEkcqxk2Gpk/t2uVB47wjN8zdCCG5YPDy6AbvC7K+q0mq4fVoROIL1g6NxaxM1HF/N7avKDPk6vS6HYh3Juwx/hY1SSGL5C83jkbKUGrxtZpxhPNjzXxuZsruy6VpVvLp+nTRU9F5JMiZWg="

jdk:
  - oraclejdk8

services:
  - mongodb

script:
 - mvn -f server/pom.xml clean verify -Pjacoco coveralls:report
 - mvn -f server/pom.xml clean verify -Pjacoco sonar:sonar
 - mvn -f server/pom.xml verify -Pfailsafe
 
after_failure:
  - cat /home/travis/build/francescosecci/sp-server-attsw/server/target/surefire-reports/*.txt 

cache:
  directories:
    - '$HOME/.m2/repository'
    - '$HOME/.sonar/cache'


  
